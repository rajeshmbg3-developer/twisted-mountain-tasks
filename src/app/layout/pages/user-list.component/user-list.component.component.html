<div class="container-fluid">
    <div class="row mb-4">
        <div class="col">
            <h1>User Management</h1>
            <p class="text-muted">Double-click on any cell to edit. Click on a row to view details.</p>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <ng-container *ngIf="loading">
                <div class="d-flex justify-content-center">
                    <div class="spinner-border" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </div>
            </ng-container>

            <ng-container *ngIf="error">
                <div class="alert alert-danger" role="alert">
                    {{ error }}
                    <button class="btn btn-outline-danger btn-sm ms-2" (click)="loadUsers()">Retry</button>
                </div>
            </ng-container>

            <ng-container *ngIf="!(loading || error)">
                <app-editable-table [data]="(users$ | async) || []" [columns]="(columns$ | async) || []"
                    (rowEdit)="handleRowEdit($event)">
                </app-editable-table>
            </ng-container>
        </div>
    </div>
</div>